(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{296:function(e,t,n){},297:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(20),o=n.n(c),r=n(3),i={loginUsuario:"[Auth] Login de usuario",logoutUsuario:"[Auth] Logout de usuario",tokenInvalido:"[Auth] Token invalido",cargarDatos:"[Usuario] Cargar datos usuario",descargarDatos:"[Usuario] Descargar datos usuario",editarNombre:"[Usuario] Editar nombre",editarDescripcion:"[Usuario] Editar descripcion",editarImagen:"[Usuario] Editar imagen",cargarContactos:"[Contactos] Cargar contactos",contactoConectado:"[Contactos] Contacto conectado",contactoDesconectado:"[Contactos] Contacto desconectado",cargarUsuariosRestantes:"[Contactos] Cargar usuarios restantes",agregarContacto:"[Contactos] Agregar contacto",eliminarContacto:"[Contactos] Eliminar contacto",cargarNotificaciones:"[Contactos] Cargar notificaciones",nuevaNotificacion:"[Contactos] Nueva notificacion",eliminarNotificacion:"[Contactos] Eliminar notificacion",limpiarContactos:"[Contactos] Limpiar contactos",activarChat:"[Chat] Activar chat",nuevoMensajeUsuario:"[Chat] Nuevo mensaje usuario",nuevoMensajeContacto:"[Chat] Nuevo mensaje contacto",mensajesVistos:"[Chat] Mensajes vistos",cargarMensajes:"[Chat] Cargar mensajes",cargarUltimosMensajes:"[Chat] Cargar ultimos mensajes",limpiarMensajes:"[Chat] Limpiar mensajes",cargarMensajesTotales:"[Chat] Cargar mensajes totales",descargarChats:"[Chat] Descargar chats"},s=(n(84),function(e){return{type:i.activarChat,payload:e}}),l=function(){return{type:i.cargarUltimosMensajes}},d=n(80),u=n(5),j=n(128),m=n.n(j),b=n(4),f=n.n(b),p=n(31),O=n(7),h=n(12),g="https://messingapp-server.herokuapp.com",x=function(){var e=Object(O.a)(f.a.mark((function e(t,n){var a,c,o,r,i=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.length>2&&void 0!==i[2]?i[2]:"GET",c="".concat(g,"/").concat(t),"GET"!==a){e.next=11;break}return e.next=5,fetch(c);case 5:return o=e.sent,e.next=8,o.json();case 8:return e.abrupt("return",e.sent);case 11:return e.next=13,fetch(c,{method:a,headers:{"Content-type":"application/json"},body:JSON.stringify(n)});case 13:return r=e.sent,e.next=16,r.json();case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(O.a)(f.a.mark((function e(t,n){var a,c,o,r,i,s=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>2&&void 0!==s[2]?s[2]:"GET",c="".concat(g,"/").concat(t),o=localStorage.getItem("token")||"","GET"!==a){e.next=12;break}return e.next=6,fetch(c,{headers:{"x-token":o}});case 6:return r=e.sent,e.next=9,r.json();case 9:return e.abrupt("return",e.sent);case 12:return e.next=14,fetch(c,{method:a,headers:{"Content-type":"application/json","x-token":o},body:JSON.stringify(n)});case 14:return i=e.sent,e.next=17,i.json();case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(O.a)(f.a.mark((function e(t,n,a){var c,o,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(g,"/").concat(t),o=localStorage.getItem("token")||"",(r=new FormData).append("imagen",n),e.next=6,fetch(c,{method:a,headers:{"x-token":o},body:r});case 6:return i=e.sent,e.next=9,i.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),N=["_id"],y=function(e){return{type:i.cargarContactos,payload:e}},C=function(e){return{type:i.eliminarContacto,payload:e}},w=function(e){return{type:i.cargarUsuariosRestantes,payload:e}},k=function(e){return{type:i.cargarNotificaciones,payload:e}},S=function(e){return function(){var t=Object(O.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M("login/contacts/notification/".concat(e),{},"DELETE");case 2:if(a=t.sent,!a.ok){t.next=8;break}n(A(e)),t.next=9;break;case 8:throw new Error("Error al eliminar notificacion");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},A=function(e){return{type:i.eliminarNotificacion,payload:e}},U=n(0),E=Object(a.createContext)(),T=function(e){var t=e.children,n=Object(r.b)(),c=function(e){var t=Object(a.useState)(null),n=Object(u.a)(t,2),c=n[0],o=n[1],r=Object(a.useState)(!1),i=Object(u.a)(r,2),s=i[0],l=i[1],d=Object(a.useCallback)((function(){var t=localStorage.getItem("token"),n=m.a.connect(e,{transports:["websocket"],autoConnect:!0,forceNew:!0,query:{"x-token":t}});o(n)}),[e]),j=Object(a.useCallback)((function(){null===c||void 0===c||c.disconnect()}),[c]);return Object(a.useEffect)((function(){return l(null===c||void 0===c?void 0:c.connected),null===c||void 0===c||c.on("connect",(function(){return l(!0)})),null===c||void 0===c||c.on("disconnect",(function(){return l(!1)})),function(){j()}}),[c,j]),{socket:c,online:s,conectarSocket:d,desconectarSocket:j}}("http://localhost:8080"),o=c.socket,s=c.online,j=c.conectarSocket,b=c.desconectarSocket,f=Object(r.c)((function(e){return e.auth})).logged;return Object(a.useEffect)((function(){f&&j()}),[f,j]),Object(a.useEffect)((function(){f||b()}),[f,b]),Object(a.useEffect)((function(){null===o||void 0===o||o.on("usuario-conectado",(function(e){n(function(e){return{type:i.contactoConectado,payload:e}}(e))})),null===o||void 0===o||o.on("usuario-desconectado",(function(e){n(function(e){return{type:i.contactoDesconectado,payload:e}}(e))})),null===o||void 0===o||o.on("cargar-mensajes",(function(e){n({type:i.cargarMensajesTotales,payload:e}),n(l())})),null===o||void 0===o||o.on("mensaje-personal",(function(e){n(function(e){return{type:i.nuevoMensajeContacto,payload:e}}(e)),n(l())})),null===o||void 0===o||o.on("mensaje-usuario",(function(e){var t;n(function(e){return{type:i.nuevoMensajeUsuario,payload:e}}(e)),n(l()),t="mensajes",d.animateScroll.scrollToBottom({containerId:t,duration:250})})),null===o||void 0===o||o.on("envio-solicitud",(function(e){n(function(e){return{type:i.nuevaNotificacion,payload:e}}(e)),h.b.info("Nueva solicitud de contacto",{containerId:"A"})})),null===o||void 0===o||o.on("solicitud-aceptada",(function(e){n({type:i.agregarContacto,payload:e}),h.b.success("Contacto ".concat(e.nombre," agregado"),{containerId:"A"})})),null===o||void 0===o||o.on("solicitud-rechazada",(function(e){h.b.error("El contacto ".concat(e.nombre," te ha rechazado"),{containerId:"A"})})),null===o||void 0===o||o.on("contacto-eliminado",(function(e){var t=e.nombre,a=e.uid;n(C(a)),h.b.error("El contacto ".concat(t," te ha eliminado"),{containerId:"A"})}))}),[n,o]),Object(U.jsx)(E.Provider,{value:{socket:o,online:s},children:t})},q=n(18),F=n(8),Y=function(e){return{type:i.cargarDatos,payload:e}},I=function(){return{type:i.descargarDatos}},D=function(e){return{type:i.editarNombre,payload:e}},G=function(e,t){return function(){var n=Object(O.a)(f.a.mark((function n(a){var c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c=M("login/edit/".concat(t),{descripcion:e},"PUT").then((function(){a(K(e))})).catch((function(){throw new Error("Error al cambiar la descripcion")})),h.b.promise(c,{containerId:"A",pending:"Cargando...",success:"Informacion cambiada correctamente",error:"Fallo al cambiar informacion"});case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},K=function(e){return{type:i.editarDescripcion,payload:e}},V=function(e){return{type:i.editarImagen,payload:e}},Z=function(){var e=Object(O.a)(f.a.mark((function e(t,n,a,c,o,r){var i,s,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("login/new",{nombre:t,email:n,password:a},"POST");case 2:i=e.sent,s=i.ok,l=i.errors,s?r.push({pathname:"/auth/register/send-email",state:{usuario:{nombre:t,email:n,password:a}}}):(c("name",l[0].msg),c("email",l[0].msg),c("password",l[0].msg),o(!1));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a,c,o,r){return e.apply(this,arguments)}}(),R=function(){return{type:i.loginUsuario}},L=function(){return{type:i.logoutUsuario}},B=function(e){var t=e.loading;return Object(U.jsx)(U.Fragment,{children:t&&Object(U.jsxs)("div",{className:"verification-loader_container",children:[Object(U.jsx)("h2",{className:"verification-loader_title",children:"Cargando..."}),Object(U.jsx)("div",{className:"verification-loader_animated"})]})})},Q=function(){return Object(U.jsx)("div",{className:"mesgs",children:Object(U.jsx)("div",{className:"middle-screen",children:Object(U.jsxs)("div",{className:"middle-screen_text",children:[Object(U.jsx)("h3",{children:"Seleccione una persona"}),Object(U.jsx)("span",{children:"Para comenzar una conversaci\xf3n"})]})})})},J=n(2),X=n(36),_=n.n(X),z="data:image/png;base64,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",P=function(e){var t=e.closeModal,n=e.usuario,c=Object(a.useContext)(E).socket,o=Object(r.c)((function(e){return e.usuario})).uid,i=Object(r.b)();return Object(U.jsx)("div",{children:Object(U.jsxs)("div",{className:"confirmacion-eliminar-contacto_container",children:[Object(U.jsx)("img",{className:"confirmacion-eliminar-contacto_imagen",src:z,alt:"advertencia"}),Object(U.jsx)("h3",{className:"confirmacion-eliminar-contacto_titulo",children:"\xbfEnviar solicitud de contacto?"}),Object(U.jsxs)("div",{className:"confirmacion-eliminar-contacto_botones",children:[Object(U.jsx)("button",{className:"confirmacion-eliminar-contacto_boton confirmar",onClick:function(){t(),i(function(e,t,n){return function(){var a=Object(O.a)(f.a.mark((function a(c){var o,r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,M("login/contacts/notification",{de:e,para:t},"POST");case 2:if(o=a.sent,r=o.notificacion,!o.ok){a.next=10;break}n.emit("solicitud-contacto",{notificacion:r,para:t}),h.b.success("Enviada solicitud de contacto",{containerId:"A"}),a.next=11;break;case 10:throw new Error("Error al agregar notificacion");case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(o,n._id,c))},children:"Confirmar"}),Object(U.jsx)("button",{className:"confirmacion-eliminar-contacto_boton rechazar",onClick:t,children:"Cancelar"})]})]})})},H=function(e){var t=e.closeModal,n=e.uid,c=Object(r.b)(),o=Object(a.useContext)(E).socket,i=Object(r.c)((function(e){return e.usuario})).uid;return Object(U.jsx)("div",{children:Object(U.jsxs)("div",{className:"confirmacion-eliminar-contacto_container",children:[Object(U.jsx)("img",{className:"confirmacion-eliminar-contacto_imagen",src:z,alt:"advertencia"}),Object(U.jsx)("h3",{className:"confirmacion-eliminar-contacto_titulo",children:"\xbfSeguro desea elminar el contacto?"}),Object(U.jsxs)("div",{className:"confirmacion-eliminar-contacto_botones",children:[Object(U.jsx)("button",{className:"confirmacion-eliminar-contacto_boton confirmar",onClick:function(){t(),c(function(e,t,n){return function(){var a=Object(O.a)(f.a.mark((function a(c){var o;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=Promise.all([M("login/contacts/".concat(e),{id:t},"DELETE"),M("login/contacts/".concat(t),{id:e},"DELETE")]).then((function(a){c(C(e)),n.emit("contacto-eliminado",{de:t,para:e})})).catch((function(e){throw new Error("Error al eliminar contacto, error: \n",e)})),h.b.promise(o,{pending:"Cargando...",success:"Contacto eliminado",error:"Fallo al eliminar contacto"});case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(n,i,o))},children:"Confirmar"}),Object(U.jsx)("button",{className:"confirmacion-eliminar-contacto_boton rechazar",onClick:t,children:"Cancelar"})]})]})})},W=function(e){var t=e.nombre,n=e.email,c=e.imagen,o=e.descripcion,r=e.uid,i=e.operacion;_.a.setAppElement(document.getElementById("modal"));var s=Object(a.useState)({agregarModal:!1,eliminarModal:!1}),l=Object(u.a)(s,2),d=l[0],j=l[1];function m(){j(!1)}return Object(U.jsxs)("div",{className:"usuario-card_container",children:[Object(U.jsx)("img",{className:"usuario-card_imagen",alt:t,src:c||"https://static.vecteezy.com/system/resources/previews/000/439/863/non_2x/vector-users-icon.jpg"}),Object(U.jsxs)("div",{className:"usuario-card_nombres-container",children:[Object(U.jsx)("h4",{className:"usuario-card_name",children:t}),Object(U.jsx)("p",{className:"usuario-card_email",children:n})]}),Object(U.jsxs)("div",{className:"usuario-card_container-button",children:["agregar"===i&&Object(U.jsx)("button",{onClick:function(){j({agregarModal:!0,eliminarModal:!1})},className:"usuario-card_button",children:Object(U.jsx)("ion-icon",{name:"person-add"})}),"eliminar"===i&&Object(U.jsx)("button",{className:"usuario-card_button",children:Object(U.jsx)("ion-icon",{onClick:function(){j({agregarModal:!1,eliminarModal:!0})},name:"person-remove"})})]}),Object(U.jsx)(_.a,{isOpen:d.eliminarModal,onRequestClose:m,className:"modal",overlayClassName:"overlay",children:Object(U.jsx)(H,{closeModal:m,uid:r})}),Object(U.jsx)(_.a,{isOpen:d.agregarModal,onRequestClose:m,className:"modal",overlayClassName:"overlay",children:Object(U.jsx)(P,{closeModal:m,usuario:{nombre:t,email:n,imagen:c,descripcion:o,_id:r}})})]})},$=n.p+"static/media/cargando.b33cf617.png",ee=function(){var e=Object(r.b)(),t=Object(a.useRef)();Object(a.useEffect)((function(){t.current.focus()}),[]);var n=Object(r.c)((function(e){return e.contactos})).usuariosRestantes,c=Object(a.useState)(""),o=Object(u.a)(c,2),i=o[0],s=o[1],l=Object(a.useState)({filtrado:!1,loading:!1}),d=Object(u.a)(l,2),j=d[0],m=d[1];return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("form",{className:"agregar-contacto_formulario",onSubmit:function(t){t.preventDefault(),""!==i&&e(function(e,t){return function(){var n=Object(O.a)(f.a.mark((function n(a){var c,o,r;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t({filtrado:!1,loading:!0}),n.next=3,M("login/users/".concat(e),"GET");case 3:if(c=n.sent,o=c.ok,r=c.usuarios,!o){n.next=11;break}a(w(r)),t({filtrado:!0,loading:!1}),n.next=12;break;case 11:throw new Error("Error al cargar usuarios");case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(i,m))},children:[j.loading&&Object(U.jsx)("img",{src:$,alt:"icono-de-carga",className:"agregar-contacto__icono-de-carga"}),Object(U.jsx)("input",{ref:t,className:"agregar-contacto_input",placeholder:"Buscar por email",type:"text",onChange:function(e){var t=e.target;s(t.value)}}),Object(U.jsx)("button",{className:"agregar-contacto_button",type:"submit",children:"Buscar"})]}),j.filtrado&&(n.length>0?Object(U.jsx)("div",{className:"agregar-contactos_container",children:n.map((function(e){return Object(a.createElement)(W,Object(J.a)(Object(J.a)({},e),{},{key:e.uid,operacion:"agregar"}))}))}):Object(U.jsx)("div",{className:"agregar-contactos_no-encontrados_container",children:Object(U.jsx)("p",{className:"agregar-contactos_no-encontrados_texto",children:"No se encuentran usuarios"})}))]})},te=function(){var e=Object(r.c)((function(e){return e.contactos})).contactos;return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)("div",{className:"agregar-contactos_container",children:null===e||void 0===e?void 0:e.map((function(e){return Object(a.createElement)(W,Object(J.a)(Object(J.a)({},e),{},{uid:e.uid,key:e.uid,operacion:"eliminar"}))}))})})},ne=function(e,t){var n=Object(a.useState)(!1),c=Object(u.a)(n,2),o=c[0],r=c[1];return Object(a.useEffect)((function(){var n;return e&&!o?r(!0):!e&&o&&(n=setTimeout((function(){return r(!1)}),t)),function(){return clearTimeout(n)}}),[e,t,o]),o},ae=function(e,t){Object(a.useEffect)((function(){function e(e){27===(e=e||window.event).keyCode&&t(!1)}return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[e,t])},ce=function(e){var t=e.children,n=e.render,c=e.setRender,o=e.buttonRef,r=Object(a.useRef)(null);!function(e,t,n){Object(a.useEffect)((function(){function a(a){e.current&&!e.current.contains(a.target)&&a.target!==n.current&&t(!1)}return document.addEventListener("mousedown",a),function(){document.removeEventListener("mousedown",a)}}),[e,t,n])}(r,c,o),ae(r,c);var i=ne(n,150);return Object(U.jsx)(U.Fragment,{children:i&&Object(U.jsx)("div",{id:"menu",ref:r,className:"".concat(n?"menu-aparece":"menu-desaparece"),children:t})})},oe=n(46),re=n.n(oe),ie=function(e){return re()(e).format("HH:mm - MM/DD")},se=function(e){var t=e.closeModal,n=e.de,c=e.idNotificacion,o=Object(r.b)(),i=Object(a.useContext)(E).socket,s=Object(r.c)((function(e){return e.usuario})).uid;return Object(U.jsx)("div",{children:Object(U.jsxs)("div",{className:"confirmacion-eliminar-contacto_container",children:[Object(U.jsx)("img",{className:"confirmacion-eliminar-contacto_imagen",src:z,alt:"advertencia"}),Object(U.jsx)("h3",{className:"confirmacion-eliminar-contacto_titulo",children:"\xbfAceptar solicitud de contacto?"}),Object(U.jsxs)("div",{className:"confirmacion-eliminar-contacto_botones",children:[Object(U.jsx)("button",{className:"confirmacion-eliminar-contacto_boton confirmar",onClick:function(){t(),o(function(e,t,n,a){return function(){var c=Object(O.a)(f.a.mark((function c(o){var r,i;return f.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:e._id,(r=Object(p.a)(e,N)).uid=e._id,i=Promise.all([M("login/contacts/".concat(r.uid),{id:t},"PUT"),M("login/contacts/".concat(t),{id:r.uid},"PUT")]).then((function(e){o(S(n)),a.emit("solicitud-aceptada",{de:t,para:r.uid})})).catch((function(e){throw new Error("Error al agregar contacto, error: \n",e)})),h.b.promise(i,{containerId:"A",pending:"Cargando...",success:"Solicitud de contacto aceptada",error:"Fallo al agregar contacto"});case 4:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(n,s,c,i))},children:"Confirmar"}),Object(U.jsx)("button",{className:"confirmacion-eliminar-contacto_boton rechazar",onClick:t,children:"Cancelar"})]})]})})},le=function(e){var t=e.time,n=e.de,c=e._id;_.a.setAppElement(document.getElementById("modal"));var o=Object(r.b)(),i=n.nombre,s=n.email,l=Object(a.useContext)(E).socket,d=Object(r.c)((function(e){return e.usuario})).uid,j=Object(a.useState)(!1),m=Object(u.a)(j,2),b=m[0],f=m[1],p=Object(a.useState)(!1),O=Object(u.a)(p,2),h=O[0],g=O[1];function x(){f(!1)}return Object(U.jsxs)("div",{className:"notificacion--card",children:[Object(U.jsxs)("div",{className:"notificacion--card__texts--container",children:[Object(U.jsx)("h4",{className:"notificacion--card__title",children:"Solicitud de contacto:"}),Object(U.jsxs)("p",{className:"notificacion--card__text",children:[i," "]}),Object(U.jsx)("p",{className:"notificacion--card__text",children:s}),Object(U.jsx)("p",{className:"notificacion--card__fecha",children:ie(t)})]}),Object(U.jsxs)("div",{className:"notificacion--card__buttons--container",children:[Object(U.jsx)("button",{onClick:function(){f(!0)},className:"notificacion--card__button",disabled:h,children:Object(U.jsx)("ion-icon",{name:"checkmark-circle"})}),Object(U.jsx)("button",{onClick:function(){g(!0),o(S(c)),l.emit("solicitud-rechazada",{de:d,para:n._id})},className:"notificacion--card__button",disabled:h,children:Object(U.jsx)("ion-icon",{name:"close-circle"})})]}),Object(U.jsx)(_.a,{isOpen:b,onRequestClose:x,className:"modal",overlayClassName:"overlay",children:Object(U.jsx)(se,{closeModal:x,de:n,idNotificacion:c})})]})},de=function(){var e=Object(r.c)((function(e){return e.contactos})).notificaciones;return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)("div",{className:"notificaciones__container",children:e.map((function(e){return Object(a.createElement)(le,Object(J.a)(Object(J.a)({},e),{},{key:e._id}))}))})})},ue=n(61),je=function(e){var t=e.descripcion,n=e.uid,c=Object(r.b)(),o=Object(a.useState)(!1),i=Object(u.a)(o,2),s=i[0],l=i[1],d=Object(a.useState)(t),j=Object(u.a)(d,2),m=j[0],b=j[1],p=function(){var e=Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(!s),c(G(m,n));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(U.jsxs)("div",{className:"perfil_contenedor-info",children:[Object(U.jsx)("p",{className:"perfil_contenedor-info_titulo",children:"Informaci\xf3n"}),Object(U.jsxs)("div",{className:"perfil_info_contenedor",children:[s?Object(U.jsx)("form",{className:"perfil_contenedor-info_formulario",onSubmit:p,children:Object(U.jsx)(ue.a,{type:"text",className:"perfil_contenedor-info_texto info-input",value:m||"Sin informacion",onChange:function(e){var t=e.target;b(t.value)}})}):Object(U.jsx)("p",{type:"text",className:"perfil_contenedor-info_texto",children:m||"Sin informacion"}),s?Object(U.jsx)("button",{onClick:p,children:Object(U.jsx)("ion-icon",{name:"checkmark"})}):Object(U.jsxs)("button",{onClick:function(){l(!s)},children:[Object(U.jsx)("ion-icon",{name:"pencil"})," "]})]})]})},me=n.p+"static/media/default-user-image.bcf4424b.jpg",be=function(e){var t=e.imagen,n=e.uid,a=Object(r.b)();return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("input",{id:"fileSelector",type:"file",name:"file",style:{display:"none"},onChange:function(e){var t=e.target.files[0];t&&a(function(e,t){return function(){var n=Object(O.a)(f.a.mark((function n(a){var c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c=v("login/edit/".concat(t),e,"PUT").then((function(e){var t=e.imagen;a(V(t))})).catch((function(){throw new Error("Error al cambiar la imagen")})),h.b.promise(c,{containerId:"A",pending:"Cargando...",success:"Imagen cambiada correctamente",error:"Fallo al cambiar imagen"});case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,n))},accept:"image/png,image/jpeg"}),Object(U.jsxs)("div",{className:"perfil_contenedor-imagen",children:[t?Object(U.jsx)("img",{className:"perfil_imagen",src:t,alt:"sunil"}):Object(U.jsx)("img",{className:"perfil_imagen",src:me,alt:"sunil"}),Object(U.jsxs)("div",{onClick:function(){document.querySelector("#fileSelector").click()},className:"perfil_contenedor_seleccionador-archivo",children:[Object(U.jsx)("ion-icon",{name:"image"}),"Cambiar foto de perfil"]})]})]})},fe=function(e){var t=e.nombre,n=e.uid,c=Object(r.b)(),o=Object(a.useState)(!1),i=Object(u.a)(o,2),s=i[0],l=i[1],d=Object(a.useState)(t),j=Object(u.a)(d,2),m=j[0],b=j[1],p=function(e){e.preventDefault(),l(!s),c(function(e,t){return function(){var n=Object(O.a)(f.a.mark((function n(a){var c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c=M("login/edit/".concat(t),{nombre:e},"PUT").then((function(){a(D(e))})).catch((function(){throw new Error("Error al cambiar el nombre")})),h.b.promise(c,{containerId:"A",pending:"Cargando...",success:"Nombre cambiado",error:"Fallo al cambiar nombre"});case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(m,n))};return Object(U.jsxs)("div",{className:"perfil_contenedor-info",children:[Object(U.jsx)("p",{className:"perfil_contenedor-info_titulo",children:"Tu nombre"}),Object(U.jsxs)("div",{className:"perfil_info_contenedor",children:[s?Object(U.jsx)("form",{className:"perfil_contenedor-info_formulario",onSubmit:p,children:Object(U.jsx)(ue.a,{type:"text",className:" info-input",value:m,onChange:function(e){var t=e.target;b(t.value)}})}):Object(U.jsx)("p",{className:"perfil_contenedor-info_texto",children:m}),s?Object(U.jsx)("button",{onClick:p,children:Object(U.jsx)("ion-icon",{name:"checkmark"})}):Object(U.jsxs)("button",{onClick:function(){l(!s)},children:[Object(U.jsx)("ion-icon",{name:"pencil"})," "]})]})]})},pe=function(){var e=Object(r.c)((function(e){return e.usuario})),t=e.email,n=e.name,a=e.descripcion,c=e.uid,o=e.imagen;return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(be,{imagen:o,uid:c}),Object(U.jsxs)("div",{className:"perfil_contenedor-info",children:[Object(U.jsx)("p",{className:"perfil_contenedor-info_titulo",children:"Direccion de correo"}),Object(U.jsx)("p",{className:"perfil_contenedor-info_texto",children:t})]}),Object(U.jsx)(fe,{nombre:n,uid:c}),Object(U.jsx)(je,{descripcion:a,uid:c})]})},Oe=function(e){var t=e.render,n=e.cerrar,c=e.children,o=e.title,r=ne(t,250),i=Object(a.useRef)(null);return ae(i,n),Object(U.jsx)(U.Fragment,{children:r&&Object(U.jsxs)("div",{className:"perfil ".concat(t?"aparecer":"desaparecer"),ref:i,children:[Object(U.jsx)("div",{className:"perfil_contenedor-boton",children:Object(U.jsxs)("button",{className:"perfil_boton",onClick:function(){n(!1)},children:[Object(U.jsx)("ion-icon",{name:"arrow-back"})," ",Object(U.jsx)("p",{className:"perfil_titulo",children:o})]})}),c]})})},he=function(e){return o.a.createPortal(Object(U.jsx)(Oe,Object(J.a)({},e)),document.getElementById("perfil"))},ge=function(){var e=Object(r.b)(),t=Object(a.useState)(!1),n=Object(u.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)(!1),l=Object(u.a)(s,2),d=l[0],j=l[1],m=Object(a.useState)(!1),b=Object(u.a)(m,2),p=b[0],h=b[1],g=Object(a.useState)(!1),x=Object(u.a)(g,2),M=x[0],v=x[1],N=Object(a.useState)(!1),y=Object(u.a)(N,2),C=y[0],w=y[1],k=Object(a.useState)(!1),S=Object(u.a)(k,2),A=S[0],E=S[1],T=Object(a.useRef)(null),q=Object(a.useRef)(null);return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("div",{className:"selector__container",children:[Object(U.jsx)("button",{className:"message-profile__contacts-button",id:"boton-menu",onClick:function(){j(!d)},children:Object(U.jsx)("ion-icon",{ref:q,name:"people"})}),Object(U.jsxs)(ce,{render:d,setRender:j,buttonRef:q,children:[Object(U.jsx)("button",{onClick:function(){v(!0)},className:"menu-usario_button",href:"#",children:"Agregar contacto"}),Object(U.jsx)("button",{onClick:function(){w(!0)},className:"menu-usario_button",href:"#",children:"Eliminar contacto"}),Object(U.jsx)("button",{onClick:function(){E(!0)},className:"menu-usario_button",href:"#",children:"Notificaciones"})]})]}),Object(U.jsxs)("div",{className:"selector__container",children:[Object(U.jsx)("button",{className:"message-profile-button",id:"boton-menu",onClick:function(){o(!c)},children:Object(U.jsx)("ion-icon",{ref:T,name:"ellipsis-vertical-circle"})}),Object(U.jsxs)(ce,{render:c,setRender:o,buttonRef:T,children:[Object(U.jsx)("button",{onClick:function(){h(!0)},className:"menu-usario_button",href:"#",children:"Perfil"}),Object(U.jsx)("button",{onClick:function(){e(function(){var e=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("token"),t(L()),t(I()),t({type:i.descargarChats}),t({type:i.limpiarContactos}),t({type:i.limpiarMensajes});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},className:"menu-usario_button",href:"#",children:"Cerrar sesion"})]})]}),Object(U.jsx)(he,{title:"Mostrar Perfil",render:p,cerrar:h,children:Object(U.jsx)(pe,{})}),Object(U.jsx)(he,{title:"Agregar Contacto",render:M,cerrar:v,children:Object(U.jsx)(ee,{})}),Object(U.jsx)(he,{title:"Eliminar Contactos",render:C,cerrar:w,children:Object(U.jsx)(te,{})}),Object(U.jsx)(he,{title:"Notificaciones",render:A,cerrar:E,children:Object(U.jsx)(de,{})})]})},xe=function(){var e=Object(r.c)((function(e){return e.usuario})),t=e.name,n=e.imagen;return Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)("div",{className:"user-profile",children:[Object(U.jsxs)("div",{className:"info-user",children:[Object(U.jsx)("div",{className:"info-user-img",children:n?Object(U.jsx)("img",{className:"info-user-img_img",src:n,alt:"sunil"}):Object(U.jsx)("img",{className:"info-user-img_img",src:me,alt:"sunil"})}),Object(U.jsx)("div",{className:"info-user-name",children:Object(U.jsx)("p",{children:t})})]}),Object(U.jsx)(ge,{})]})})},Me=function(e){var t=e.usuario,n=Object(r.c)((function(e){return e.chat})),a=n.chatActivo,c=n.mensajesTotales,o=Object(r.b)(),l=t.imagen,d=t.uid,u=t.ultimoMensaje,j=u.fecha,m=u.mensaje,b=u.nuevosMensajes,p=function(){var e=Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(s(t)),o((n=c,a=t.uid,{type:i.cargarMensajes,payload:{mensajes:n,id:a}}));case 2:case"end":return e.stop()}var n,a}),e)})));return function(){return e.apply(this,arguments)}}();return Object(U.jsx)("div",{className:"chat_list ".concat(d===a&&"active_chat"),onClick:p,children:Object(U.jsxs)("div",{className:"chat_people",children:[Object(U.jsx)("div",{className:"chat_img",children:l?Object(U.jsx)("img",{className:"info-user-img_img",src:l,alt:"sunil"}):Object(U.jsx)("img",{className:"info-user-img_img",src:me,alt:"sunil"})}),Object(U.jsxs)("div",{className:"chat_ib",children:[Object(U.jsxs)("div",{className:"chat-arriba",children:[Object(U.jsx)("h5",{className:"chat_name",children:t.nombre}),j&&Object(U.jsx)("p",{className:"chat_fecha",children:ie(j)})]}),Object(U.jsx)("div",{className:"chat_last_message",children:Object(U.jsx)("p",{className:"chat_mensaje",children:m})}),b>0&&Object(U.jsx)("span",{className:"chat__notifiy-messages",children:b})]})]})})},ve=function(){var e=Object(r.c)((function(e){return e.contactos})).contactos,t=Object(r.c)((function(e){return e.chat})).ultimosMensajes,n=Object(a.useState)([]),c=Object(u.a)(n,2),o=c[0],i=c[1];return Object(a.useEffect)((function(){var n=e.map((function(e){return e.ultimoMensaje=t.find((function(t){return t.contacto===e.uid})),e})).sort((function(e,t){return new Date(t.ultimoMensaje.fecha).getTime()-new Date(e.ultimoMensaje.fecha).getTime()}));i(n)}),[e,t]),Object(U.jsxs)("div",{className:"inbox_chat",children:[o.map((function(e){return Object(U.jsx)(Me,{usuario:e},e.uid)})),Object(U.jsx)("div",{className:"extra_space"})]})},Ne=function(){return Object(U.jsxs)("div",{className:"inbox_people ",children:[Object(U.jsx)(xe,{}),Object(U.jsx)(ve,{})]})},ye=function(e){var t=e.msg;return Object(U.jsx)("div",{className:"incoming_msg-container",children:Object(U.jsxs)("div",{className:"incoming_msg",children:[Object(U.jsx)("div",{className:"incoming_msg_img"}),Object(U.jsx)("div",{className:"received_msg",children:Object(U.jsxs)("div",{className:"received_withd_msg",children:[Object(U.jsx)("p",{children:t.mensaje}),Object(U.jsx)("span",{className:"time_date",children:ie(t.createdAt)})]})})]})})},Ce=function(){var e=Object(r.c)((function(e){return e.chat})).chatActivo;return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("div",{className:"perfil_contenedor-imagen",children:e.imagen?Object(U.jsx)("img",{src:e.imagen,alt:"sunil",className:"perfil_imagen"}):Object(U.jsx)("img",{src:me,alt:"sunil",className:"perfil_imagen"})}),Object(U.jsxs)("div",{className:"perfil_contenedor-info",children:[Object(U.jsx)("p",{className:"perfil_contenedor-info_titulo",children:"Direccion de correo"}),Object(U.jsx)("p",{className:"perfil_contenedor-info_texto",children:e.email})]}),Object(U.jsxs)("div",{className:"perfil_contenedor-info",children:[Object(U.jsx)("p",{className:"perfil_contenedor-info_titulo",children:"Nombre del usuario"}),Object(U.jsx)("p",{className:"perfil_contenedor-info_texto",children:e.nombre})]}),Object(U.jsxs)("div",{className:"perfil_contenedor-info",children:[Object(U.jsx)("p",{className:"perfil_contenedor-info_titulo",children:"Informaci\xf3n"}),Object(U.jsx)("p",{className:"perfil_contenedor-info_texto",children:e.descripcion?e.descripcion:"Sin informacion"})]})]})},we=function(){var e=Object(r.c)((function(e){return e.chat})).chatActivo,t=Object(r.b)(),n=Object(a.useState)(!1),c=Object(u.a)(n,2),o=c[0],s=c[1],l=Object(a.useRef)(null),d=Object(a.useState)(!1),j=Object(u.a)(d,2),m=j[0],b=j[1];return Object(U.jsxs)("div",{className:"message-profile",children:[Object(U.jsx)("button",{onClick:function(){t({type:i.limpiarMensajes})},className:"boton-navegacion-atras",children:Object(U.jsx)("ion-icon",{name:"arrow-back"})}),Object(U.jsxs)("div",{className:"info-contacto",children:[Object(U.jsx)("div",{className:"info-contacto-img",children:(null===e||void 0===e?void 0:e.imagen)?Object(U.jsx)("img",{src:null===e||void 0===e?void 0:e.imagen,alt:"sunil"}):Object(U.jsx)("img",{src:me,alt:"sunil"})}),Object(U.jsx)("div",{className:"info-contacto-nombre",children:Object(U.jsx)("p",{children:null===e||void 0===e?void 0:e.nombre})})]}),Object(U.jsxs)("div",{className:"selector__container",children:[Object(U.jsx)("button",{className:"message-profile-button",onClick:function(){s(!o)},children:Object(U.jsx)("ion-icon",{ref:l,name:"ellipsis-vertical-circle"})}),Object(U.jsx)(ce,{render:o,setRender:s,buttonRef:l,children:Object(U.jsx)("button",{onClick:function(){b(!m)},className:"menu-usario_button",href:"#",children:"Info del contacto"})}),Object(U.jsx)(he,{title:"Contacto",render:m,cerrar:b,children:Object(U.jsx)(Ce,{})})]})]})},ke=function(e){var t=e.msg;return Object(U.jsx)("div",{className:"sent_message-container",children:Object(U.jsxs)("div",{className:"sent_msg",children:[Object(U.jsx)("p",{children:t.mensaje}),Object(U.jsx)("span",{className:"time_date",children:ie(t.createdAt)})]})})},Se=n(129),Ae=n.n(Se),Ue=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),i=Object(u.a)(o,2),s=i[0],l=i[1],d=Object(a.useContext)(E).socket,j=Object(r.c)((function(e){return e.usuario})).uid,m=Object(r.c)((function(e){return e.chat})).chatActivo;return Object(U.jsxs)("form",{onSubmit:function(e){e.preventDefault(),0!==n.length&&(c(""),d.emit("mensaje-personal",{de:j,para:m.uid,mensaje:n}))},className:"type_msg",children:[Object(U.jsxs)("div",{className:"type_msg_emoticon",onClick:function(){return l(!s)},children:[Object(U.jsx)("ion-icon",{name:"happy"}),s&&Object(U.jsx)(Ae.a,{onEmojiClick:function(e,t){var a=t.emoji;c(n+a)},pickerStyle:Ee})]}),Object(U.jsx)("input",{type:"text",className:"write_msg",placeholder:"Escribe un mensaje aqui...",value:n,onChange:function(e){var t=e.target;c(t.value)}}),Object(U.jsx)("button",{className:"type_msg_button",type:"submit",children:Object(U.jsx)("ion-icon",{className:"type_msg_button_ionicon",name:"paper-plane"})})]})},Ee={position:"relative",bottom:"365px",backgroundColor:"white"},Te=function(){return Object(U.jsx)("div",{className:"sin-mensajes",children:Object(U.jsx)("h2",{children:"Sin mensajes"})})},qe=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.chat})),n=t.mensajes,c=t.chatActivo,o=Object(r.c)((function(e){return e.usuario})).uid;return Object(a.useEffect)((function(){var t;n&&(t="mensajes",d.animateScroll.scrollToBottom({containerId:t,duration:0})),e(function(e){return{type:i.mensajesVistos,payload:e}}(null===c||void 0===c?void 0:c.uid))}),[n,c,e]),Object(U.jsxs)("div",{className:"mesgs",children:[Object(U.jsx)(we,{}),Object(U.jsxs)("div",{id:"mensajes",className:"msg_history",children:[0===n.length&&Object(U.jsx)(Te,{}),null===n||void 0===n?void 0:n.map((function(e){return e.para===o?Object(U.jsx)(ye,{msg:e},e._id):Object(U.jsx)(ke,{msg:e},e._id)}))]}),Object(U.jsx)(Ue,{})]})},Fe=n(130),Ye=function(){var e=Object(r.c)((function(e){return e.chat})),t=e.chatActivo,n=e.loaded,a=Object(Fe.useMediaQuery)({query:"(max-width: 650px)"});return n?Object(U.jsx)(U.Fragment,{children:Object(U.jsx)("div",{className:"messaging",children:Object(U.jsxs)("div",{className:"inbox_msg",children:[Object(U.jsx)("div",{id:"perfil"}),Object(U.jsx)("div",{id:"modal"}),Object(U.jsx)(h.a,{position:"bottom-left",autoClose:4e3,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!1,draggablePercent:60,pauseOnHover:!1}),a?Object(U.jsx)(U.Fragment,{children:(null===t||void 0===t?void 0:t.uid)?Object(U.jsx)(qe,{}):Object(U.jsx)(Ne,{})}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Ne,{}),(null===t||void 0===t?void 0:t.uid)?Object(U.jsx)(qe,{}):Object(U.jsx)(Q,{})]})]})})}):Object(U.jsx)(B,{loading:!0})},Ie=function(e){var t,n,c=e.location,o=Object(a.useState)({send:!1,loading:!1}),r=Object(u.a)(o,2),i=r[0],s=r[1],l=function(){var e=Object(O.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({send:!1,loading:!0}),e.next=3,x("login/re-send-verify",{email:c.state.usuario.email},"POST");case 3:t=e.sent,n=t.ok,console.log(n),s(n?{send:!0,loading:!1}:{send:!1,loading:!1});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(null===(t=c.state)||void 0===t||null===(n=t.usuario)||void 0===n?void 0:n.email)?Object(U.jsxs)("div",{className:"confirmation-container",children:[Object(U.jsx)(B,{loading:i.loading}),Object(U.jsxs)("div",{className:"confirmation-box",children:[Object(U.jsx)("h3",{className:"confirmation-title",children:"Email de confirmacion enviado"}),Object(U.jsx)("h2",{className:"confirmation-subtitle",children:"Se la enviado un email de confirmacion a su casilla de correo electronico"}),Object(U.jsx)("p",{className:"confirmation-text",children:"No le llego el email?"}),Object(U.jsx)("button",{className:"confirmation-button",onClick:l,children:"Enviar nuevamente email"}),i.send&&Object(U.jsx)("p",{className:"confirmation-send",children:"Mensaje enviado correctamente"})]})]}):Object(U.jsx)(F.a,{to:"/auth/login"})},De=function(){var e=Object(F.g)().id,t=Object(a.useState)({verified:!1,loading:!0}),n=Object(u.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)((function(){(function(){var t=Object(O.a)(f.a.mark((function t(){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x("login/verify/".concat(e),"GET");case 2:n=t.sent,a=n.ok,o(a?{verified:!0,loading:!1}:{verified:!1,loading:!1});case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(U.jsx)("div",{className:"confirmation-container",children:Object(U.jsxs)("div",{className:"confirmation-box",children:[Object(U.jsx)(B,{loading:c.loading}),c.verified?Object(U.jsx)("h2",{className:"confirmation-title",children:"Verificando Correctamente"}):Object(U.jsx)("h2",{className:"confirmation-title",children:"Error al verificar"}),Object(U.jsx)(q.b,{to:"/auth/login",className:"txt-verification",children:"Ir a Inicio de sesion"})]})})},Ge=n(11),Ke=n(28),Ve=function(){var e=Object(r.b)(),t=Ke.a({email:Ke.b().email("Ingresar email valido").required("Email es requerido"),password:Ke.b().required("Contrase\xf1a es requerida")});return Object(U.jsx)("div",{className:"login-form-container",children:Object(U.jsx)(Ge.d,{initialValues:function(){var e=localStorage.getItem("email");return e?{email:e,password:"",rememberme:!0}:{email:"",password:"",rememberme:!1}}(),validationSchema:t,onSubmit:function(t,n){var a=n.setFieldError;t.rememberme?localStorage.setItem("email",t.email):localStorage.removeItem("email");var c=t.email,o=t.password;return e(function(e,t){return function(){var n=Object(O.a)(f.a.mark((function n(a){var c,o;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x("login",{email:e,password:t},"POST");case 2:if(!(c=n.sent).ok){n.next=12;break}localStorage.setItem("token",c.token),o=c.usuario,a(R(o)),a(Y(o)),a(y(o.contactos)),a(k(o.notificaciones)),n.next=13;break;case 12:throw new Error(c.msg);case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(c,o)).catch((function(e){var t=e.message;a("email",t),a("password",t)}))},validateOnChange:!1,validateOnBlur:!1,children:function(e){var t=e.errors,n=e.isSubmitting;return Object(U.jsxs)(Ge.c,{className:"login-form",children:[Object(U.jsx)("h2",{className:"login-form-title",children:"Ingresar"}),Object(U.jsxs)("div",{className:"login-form-input",children:[Object(U.jsx)(Ge.b,{className:"input-auth ".concat(t.email?"validate-input":""),type:"email",name:"email",placeholder:"Email",autoComplete:"off"}),Object(U.jsx)(Ge.a,{name:"email",component:"div",className:"error-input"})]}),Object(U.jsxs)("div",{className:"login-form-input",children:[Object(U.jsx)(Ge.b,{className:"input-auth ".concat(t.password?"validate-input":""),type:"password",name:"password",placeholder:"Password",autoComplete:"off"}),Object(U.jsx)(Ge.a,{name:"password",component:"div",className:"error-input"})]}),Object(U.jsxs)("div",{className:"login-form-checkbox",children:[Object(U.jsx)(Ge.b,{className:"input-checkbox",type:"checkbox",name:"rememberme"}),Object(U.jsx)("label",{className:"label-checkbox",children:"Recordarme"})]}),Object(U.jsx)("div",{className:"link-anchor",children:Object(U.jsx)(q.b,{to:"/auth/register",className:"txt1",children:"Nueva cuenta?"})}),Object(U.jsx)("div",{className:"login-form-button-container",children:Object(U.jsx)("button",{type:"submit",className:"login-form-button-container-button",disabled:n,children:"Ingresar"})})]})}})})},Ze=function(e){var t=e.history,n=Ke.a({name:Ke.b().required("El nombre es requerido"),email:Ke.b().email("Ingresar email valido").required("Email es requerido"),password:Ke.b().required("Contrase\xf1a es requerida")});return Object(U.jsx)("div",{className:"login-form-container",children:Object(U.jsx)(Ge.d,{initialValues:{name:"",email:"",password:""},validationSchema:n,onSubmit:function(e,n){var a=n.setFieldError,c=n.setSubmitting,o=e.name,r=e.email,i=e.password;Z(o,r,i,a,c,t)},validateOnChange:!1,validateOnBlur:!1,children:function(e){var t=e.errors,n=e.isSubmitting;return Object(U.jsxs)(Ge.c,{className:"login-form",children:[Object(U.jsx)("h2",{className:"login-form-title",children:"Registrarse"}),Object(U.jsxs)("div",{className:"login-form-input",children:[Object(U.jsx)(Ge.b,{className:"input-auth ".concat(t.name?"validate-input":""),type:"text",name:"name",placeholder:"Nombre",autoComplete:"off"}),Object(U.jsx)(Ge.a,{name:"name",component:"div",className:"error-input"})]}),Object(U.jsxs)("div",{className:"login-form-input",children:[Object(U.jsx)(Ge.b,{className:"input-auth ".concat(t.email?"validate-input":""),type:"email",name:"email",placeholder:"Email",autoComplete:"off"}),Object(U.jsx)(Ge.a,{name:"email",component:"div",className:"error-input"})]}),Object(U.jsxs)("div",{className:"login-form-input",children:[Object(U.jsx)(Ge.b,{className:"input-auth ".concat(t.password?"validate-input":""),type:"password",name:"password",placeholder:"Password",autoComplete:"off"}),Object(U.jsx)(Ge.a,{name:"password",component:"div",className:"error-input"})]}),Object(U.jsx)("div",{className:"link-anchor",children:Object(U.jsx)("div",{className:"text-right",children:Object(U.jsx)(q.b,{to:"/auth/login",className:"txt1",children:"Ya tienes cuenta?"})})}),Object(U.jsx)("div",{className:"login-form-button-container",children:Object(U.jsx)("button",{type:"submit",className:"login-form-button-container-button",disabled:n,children:"Ingresar"})}),Object(U.jsx)(B,{loading:n})]})}})})},Re=function(){return Object(U.jsx)("div",{className:"limiter",children:Object(U.jsx)("div",{className:"container-login100",children:Object(U.jsx)("div",{className:"wrap-login100 p-t-50 p-b-90",children:Object(U.jsxs)(F.d,{children:[Object(U.jsx)(F.b,{exact:!0,path:"/auth/login",component:Ve}),Object(U.jsx)(F.b,{exact:!0,path:"/auth/register",component:Ze}),Object(U.jsx)(F.b,{exact:!0,path:"/auth/register/send-email",component:Ie}),Object(U.jsx)(F.b,{exact:!0,path:"/auth/register/confirmation/:id",component:De}),Object(U.jsx)(F.a,{to:"/auth/login"})]})})})})},Le=["isAutenticated","component"],Be=function(e){var t=e.isAutenticated,n=e.component,a=Object(p.a)(e,Le);return Object(U.jsx)(F.b,Object(J.a)(Object(J.a)({},a),{},{component:function(e){return t?Object(U.jsx)(n,Object(J.a)({},e)):Object(U.jsx)(F.a,{to:"/auth"})}}))},Qe=["isAutenticated","component"],Je=function(e){var t=e.isAutenticated,n=e.component,a=Object(p.a)(e,Qe);return Object(U.jsx)(F.b,Object(J.a)(Object(J.a)({},a),{},{component:function(e){return t?Object(U.jsx)(F.a,{to:"/"}):Object(U.jsx)(n,Object(J.a)({},e))}}))},Xe=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.auth})),n=t.checking,c=t.logged;return Object(a.useEffect)((function(){e(function(){var e=Object(O.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("token")){e.next=6;break}t({type:i.tokenInvalido}),t(I()),e.next=10;break;case 6:return e.next=8,M("login/renew");case 8:(n=e.sent).ok?(localStorage.setItem("token",n.token),a=n.usuario,t(R()),t(Y(a)),t(y(a.contactos)),t(k(a.notificaciones))):(t({type:i.tokenInvalido}),t(I()));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),n?Object(U.jsx)(B,{loading:!0}):Object(U.jsx)(q.a,{children:Object(U.jsx)("div",{children:Object(U.jsxs)(F.d,{children:[Object(U.jsx)(Je,{isAutenticated:c,path:"/auth",component:Re}),Object(U.jsx)(Be,{isAutenticated:c,exact:!0,path:"/",component:Ye}),Object(U.jsx)(F.a,{to:"/"})]})})})},_e=n(40),ze=n(136),Pe={checking:!0,logged:!1},He={loaded:!1,mensajesTotales:[],ultimosMensajes:[],chatActivo:{},mensajes:[]},We=n(13),$e=["_id"],et={contactos:[],usuariosRestantes:[],notificaciones:[]},tt={uid:null,name:null,email:null,description:"",imagen:null},nt=Object(_e.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0,n=(t.payload,t.type);switch(n){case i.loginUsuario:return{checking:!1,logged:!0};case i.logoutUsuario:return Object(J.a)(Object(J.a)({},e),{},{checking:!1,logged:!1});case i.tokenInvalido:return{checking:!1,logged:!1};default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.activarChat:return e.chatActivo===t.payload?e:Object(J.a)(Object(J.a)({},e),{},{chatActivo:t.payload,mensajes:[]});case i.nuevoMensajeUsuario:return e.mensajesTotales.mensajesPorContacto.forEach((function(e){e.contacto===t.payload.para&&(e.mensajesContacto.push(t.payload),e.ultimoMensaje={mensaje:t.payload.mensaje,fecha:t.payload.createdAt,contacto:t.payload.para})})),Object(J.a)({},e);case i.nuevoMensajeContacto:return e.mensajesTotales.mensajesPorContacto.forEach((function(n){n.contacto===t.payload.de&&(n.ultimoMensaje.nuevosMensajes||(n.ultimoMensaje.nuevosMensajes=0),n.mensajesContacto.push(t.payload),n.ultimoMensaje={mensaje:t.payload.mensaje,fecha:t.payload.createdAt,contacto:t.payload.de,nuevosMensajes:n.ultimoMensaje.nuevosMensajes},t.payload.de!==e.chatActivo.uid&&(n.ultimoMensaje.nuevosMensajes=n.ultimoMensaje.nuevosMensajes+1))})),Object(J.a)({},e);case i.mensajesVistos:return e.mensajesTotales.mensajesPorContacto.forEach((function(e){e.contacto===t.payload&&(e.ultimoMensaje.nuevosMensajes=0)})),Object(J.a)({},e);case i.cargarMensajes:return Object(J.a)(Object(J.a)({},e),{},{mensajes:e.mensajesTotales.mensajesPorContacto.find((function(e){return e.contacto===t.payload.id})).mensajesContacto});case i.limpiarMensajes:return Object(J.a)(Object(J.a)({},e),{},{chatActivo:null,mensajes:[]});case i.cargarUltimosMensajes:return Object(J.a)(Object(J.a)({},e),{},{ultimosMensajes:e.mensajesTotales.mensajesPorContacto.map((function(e){return e.ultimoMensaje})),loaded:!0});case i.cargarMensajesTotales:return Object(J.a)(Object(J.a)({},e),{},{mensajesTotales:t.payload});case i.descargarChats:return{loaded:!1,mensajesTotales:[],ultimosMensajes:[],chatActivo:{},mensajes:[]};default:return e}},contactos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0,n=t.payload,a=t.type;switch(a){case i.cargarNotificaciones:return Object(J.a)(Object(J.a)({},e),{},{notificaciones:n});case i.cargarContactos:var c=n.map((function(e){e._id;var t=Object(p.a)(e,$e);return t.uid=e._id,t}));return Object(J.a)(Object(J.a)({},e),{},{contactos:c});case i.contactoConectado:return Object(J.a)(Object(J.a)({},e),{},{contactos:e.contactos.map((function(e){return e.uid===n&&(e.online=!0),e}))});case i.contactoDesconectado:return Object(J.a)(Object(J.a)({},e),{},{contactos:e.contactos.map((function(e){return e.uid===n&&(e.online=!1),e}))});case i.cargarUsuariosRestantes:return Object(J.a)(Object(J.a)({},e),{},{usuariosRestantes:n});case i.agregarContacto:return Object(J.a)(Object(J.a)({},e),{},{contactos:[].concat(Object(We.a)(e.contactos),[n])});case i.eliminarContacto:return Object(J.a)(Object(J.a)({},e),{},{contactos:e.contactos.filter((function(e){return e.uid!==n}))});case i.nuevaNotificacion:return Object(J.a)(Object(J.a)({},e),{},{notificaciones:[n].concat(Object(We.a)(e.notificaciones))});case i.eliminarNotificacion:return Object(J.a)(Object(J.a)({},e),{},{notificaciones:e.notificaciones.filter((function(e){return e._id!==n}))});case i.limpiarContactos:return{contactos:[],usuariosRestantes:[],notificaciones:[]};default:return e}},usuario:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0,n=t.payload,a=t.type;switch(a){case i.cargarDatos:var c=n;return{uid:c.uid,name:c.nombre,email:c.email,descripcion:c.descripcion,imagen:c.imagen};case i.descargarDatos:return{uid:null,name:null,email:null,description:null,imagen:null};case i.editarNombre:return Object(J.a)(Object(J.a)({},e),{},{name:n});case i.editarDescripcion:return Object(J.a)(Object(J.a)({},e),{},{descripcion:n});case i.editarImagen:return Object(J.a)(Object(J.a)({},e),{},{imagen:n});default:return e}}}),at="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_e.c,ct=Object(_e.d)(nt,at(Object(_e.a)(ze.a)));n(295);re.a.locale("es");var ot=function(){return Object(U.jsx)(r.a,{store:ct,children:Object(U.jsx)(T,{children:Object(U.jsx)(Xe,{})})})};n(296);o.a.render(Object(U.jsx)(ot,{}),document.getElementById("root"))}},[[297,1,2]]]);
//# sourceMappingURL=main.1aaf9056.chunk.js.map